# Plan: 017

Captured: 2025-09-10T17:54:05.874Z

## Plan: Clean Up All TypeScript and Biome Errors/Warnings

### Overview
Fix all 8 TypeScript errors and 76 Biome issues (52 errors + 24 warnings), then adjust configuration to make all rules errors for stricter enforcement.

### TypeScript Fixes (8 errors)

1. **Unused type declarations (3 errors)**:
   - Remove unused `HookOutput` interface from `post_compact.ts` and `stop_review.ts`
   - Remove unused `claudeDir` variable in `post_compact.ts`

2. **Unused parameters (4 errors)**:
   - Remove unused `reject` parameter in `pre_compact.ts` Promise
   - Remove unused `basename` import in `stop_review.ts`
   - Remove unused `cwd` parameters in `git-helpers.ts` (2 instances)

3. **Private property access (1 error)**:
   - Make `checkRecentNonTaskCommits` method public in `stop_review.ts`

### Biome Fixes (76 issues)

1. **Node protocol imports (31 errors)** - Auto-fixable:
   - Run `bun run fix` to automatically add `node:` prefix to all Node.js imports
   - Affects: fs, path, child_process, readline, crypto imports

2. **Explicit any types (20 errors)**:
   - Define proper types for logger parameters
   - Create interfaces for hook inputs/outputs
   - Type the error handlers properly

3. **Unused variables/imports (14 issues)**:
   - Remove unused variables and imports
   - For intentionally unused vars (like error handlers), prefix with underscore

4. **Switch declarations (8 errors)**:
   - Wrap case statements in blocks when declaring variables

5. **Code improvements (8 issues)**:
   - Use optional chaining (5 instances)
   - Use template literals instead of concatenation (2 instances)
   - Use const instead of let (1 instance)

6. **Remove suppressions (3 issues)**:
   - Remove @ts-ignore comment
   - Fix non-null assertions

### Configuration Updates

After fixing all issues, update `biome.json`:
- Change `noUnusedVariables` from "warn" to "error"
- Change `noNonNullAssertion` from "warn" to "error"
- Add `useNodejsImportProtocol` as "error" explicitly

### Execution Order

1. Run `bun run fix` to auto-fix all fixable issues (node: protocol, formatting)
2. Fix TypeScript errors manually (unused declarations, private access)
3. Fix remaining Biome errors manually (any types, switch blocks, etc.)
4. Update biome.json to make all rules errors
5. Run final validation with `bun run check`

### Expected Outcome
- Zero TypeScript errors
- Zero Biome errors or warnings
- Stricter configuration preventing future issues
- Clean, consistent codebase following all best practices