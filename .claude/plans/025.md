# Plan: 025

Captured: 2025-09-11T01:44:31.791Z

# GitHub Integration Implementation Plan

## Overview
Implement comprehensive GitHub integration that automatically creates issues for tasks, manages branches via `gh issue develop`, and opens PRs instead of merging. Also set up the current repository on GitHub.

## Phase 1: Configuration & Setup

### 1.1 Add GitHub Integration Configuration
- Add `github_integration` feature to track.config.json with sub-options:
  - `enabled: boolean` - master toggle
  - `auto_create_issues: boolean` - create GitHub issues for tasks  
  - `use_issue_branches: boolean` - use `gh issue develop` for branches
  - `auto_create_prs: boolean` - open PRs instead of merging
  - `repository_url: string` - GitHub repo URL for validation

### 1.2 Update Config Interface & Validation  
- Extend HookConfig interface in lib/config.ts to support GitHub settings
- Add validation functions to ensure `gh` CLI is available and repo is connected
- Add helper functions to detect if current repo has GitHub remote

## Phase 2: Task Creation Integration

### 2.1 Enhance capture_plan.ts Hook
- When GitHub integration enabled and task created:
  - Extract task title and description from plan
  - Create GitHub issue using `gh issue create`
  - Store issue number in task file metadata  
  - Use `gh issue develop -c` to create and switch to linked branch
  - Fall back to existing git branching if GitHub operations fail

### 2.2 Issue Creation Logic
- Parse task plan to extract:
  - Title (first heading or summary line)
  - Description (remaining content, formatted for GitHub)
  - Labels (could derive from task type/complexity)
- Handle edge cases: no network, API limits, authentication issues

## Phase 3: Task Completion Integration  

### 3.1 Update complete-task.ts Script
- When GitHub integration enabled:
  - Push current branch to origin
  - Skip the merge operation entirely
  - Return status indicating "PR workflow active"

### 3.2 Enhance complete-task.md Command
- Add new section after automated script:
  - "## GitHub Workflow" (only shown if GitHub integration enabled)
  - Instructions for Claude to:
    - Create PR using `gh pr create` with task summary as description
    - Switch back to default branch
    - Provide PR URL to user
- Add conditional logic based on script output

## Phase 4: GitHub Repository Setup

### 4.1 Create cahaseler/cc-track Repository
- Use `gh repo create cahaseler/cc-track --public` 
- Set description: "Task Review And Context Keeper - Keep your vibe coding on track"
- Add topics: claude-code, task-management, context-preservation

### 4.2 Initial Repository Population
- Add and commit all current work
- Push to new repository
- Update configuration to point to new repo
- Verify GitHub integration works end-to-end

## Phase 5: Error Handling & Edge Cases

### 5.1 Graceful Degradation
- Detect when `gh` CLI not available
- Handle authentication failures  
- Fall back to local git operations when GitHub unavailable
- Clear error messages for configuration issues

### 5.2 Repository State Validation
- Verify GitHub remote exists before attempting operations
- Check for uncommitted changes before branch operations
- Validate issue numbers and branch names

## Implementation Order
1. Configuration setup and interfaces
2. Repository creation and initial push  
3. Task creation GitHub integration
4. Task completion GitHub integration
5. Error handling and testing

## Files to Create/Modify
- **New**: `.claude/lib/github-helpers.ts` - GitHub API wrapper functions
- **Modify**: `.claude/lib/config.ts` - Add GitHub config interface
- **Modify**: `.claude/track.config.json` - Add GitHub integration settings  
- **Modify**: `.claude/hooks/capture_plan.ts` - Add issue creation
- **Modify**: `.claude/scripts/complete-task.ts` - Add PR workflow
- **Modify**: `.claude/commands/complete-task.md` - Add GitHub instructions
- **Modify**: `.claude/commands/config-track.md` - Add GitHub configuration

## Validation Plan
- Test with GitHub integration disabled (should work as before)
- Test issue creation and branch linking
- Test PR creation and branch switching
- Test error scenarios (no auth, no network, etc.)
- Verify integration doesn't break existing git branching features

This approach maintains backward compatibility while adding powerful GitHub integration that streamlines the development workflow.