# Plan: 031

Captured: 2025-09-12T11:03:37.827Z

## Plan: Make Default Branch Configurable and Migrate to 'main'

### Phase 1: Add Configuration Support for Default Branch
1. **Add default branch configuration to track.config.json**
   - Add new `git.defaultBranch` config option (defaults to 'main')
   - This allows projects to configure their preferred default branch

2. **Update GitHelpers class to use configured default**
   - Modify `getDefaultBranch()` to check config first
   - Fall back to current detection logic if not configured
   - Ensure all methods respect the configured value

3. **Update complete-task command documentation**
   - Change hardcoded reference to use dynamic default branch detection
   - Update instructions to check out the actual default branch

### Phase 2: Migrate This Repository to 'main'
1. **Create and push 'main' branch**
   - Create 'main' from current 'master'
   - Push to GitHub

2. **Update GitHub repository settings**
   - Change default branch to 'main' via GitHub UI/API
   - Update branch protection rules if any

3. **Update CI/CD configurations**
   - Update .releaserc.json to use 'main' branch
   - GitHub Actions workflow already supports both

4. **Delete local and remote 'master' branches**
   - After confirming everything works with 'main'
   - Clean up references

### Phase 3: Documentation Updates
1. Update any documentation referencing 'master'
2. Update task files that mention 'master' in their descriptions

### Files to Modify:
- `.claude/track.config.json` - Add git.defaultBranch config
- `src/lib/git-helpers.ts` - Use config for default branch
- `src/lib/git-helpers.test.ts` - Update tests for new logic
- `.claude/commands/complete-task.md` - Dynamic branch detection
- `.releaserc.json` - Change to 'main' branch
- Various task documentation files - Update references

This approach makes the default branch configurable for any project using cc-track while also modernizing our own repository to use 'main'.