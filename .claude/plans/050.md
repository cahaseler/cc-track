# Plan: 050

Captured: 2025-09-15T00:50:57.914Z

## Plan: Move All Documentation Updates to Prepare Phase

### Problem
Currently, documentation updates are split between two phases:
- **Prepare phase**: Task file, decision log, system patterns
- **Complete phase**: Progress log updates, backlog clearing

This causes issues when on feature branches because the complete-task command switches back to main after creating the PR, then prompts for documentation updates that would create changes on main.

### Solution
Consolidate ALL documentation updates into the prepare-completion phase, including:
1. Progress log updates
2. Backlog item clearing (if the task came from backlog)

### Implementation Steps

1. **Update prepare-completion.ts**:
   - Add prompts for progress log updates after the existing documentation prompts
   - Add prompts to check and clear related backlog items
   - Keep existing prompts for task file, decision log, and system patterns

2. **Update complete-task.ts**:
   - Remove the post-completion documentation update prompts (lines ~494-500)
   - Keep PR enhancement prompts
   - Focus only on final summary reporting

### Benefits
- All documentation happens BEFORE branch switching
- No merge conflicts from updating docs on main after PR creation
- Cleaner separation: prepare = validation + docs, complete = git operations + PR
- The workflow itself will serve as the test when we complete this task

### Files to Modify
- `src/commands/prepare-completion.ts` - Add progress log and backlog prompts
- `src/commands/complete-task.ts` - Remove documentation prompts
- Update backlog to mark this item as addressed