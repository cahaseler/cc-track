# Plan: 050

Captured: 2025-09-15T00:11:15.553Z

## Fix Stop-Review Hook Max Turns Error

I've found the issue in the stop-review hook. The hook is calling the Claude SDK without specifying a `maxTurns` value, which defaults to 1. This is causing the "error_max_turns" issue when the review needs more than one turn to complete properly.

### The Fix

In `src/hooks/stop-review.ts` at line 566, I need to add `maxTurns: 5` to the options:

**Current code:**
```typescript
const response = await claudeSDK.prompt(prompt, model, { timeoutMs });
```

**Fixed code:**
```typescript
const response = await claudeSDK.prompt(prompt, model, { timeoutMs, maxTurns: 5 });
```

This simple change will allow the Claude SDK to use up to 5 turns if needed for the review, which should resolve the error_max_turns issue that's been occurring.

The change is minimal and follows the same pattern used in other hooks like pre-compact (which uses maxTurns: 20) and the update task flow (which uses maxTurns: 10).