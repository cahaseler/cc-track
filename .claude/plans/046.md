# Plan: 046

Captured: 2025-09-14T01:21:14.980Z

## Fix GitHub Build Version Numbers (Simplified)

### Problem
The binaries built by GitHub Actions show version `1.0.0` (hardcoded) instead of the actual release version (e.g., `1.11.0`).

### Solution
Use semantic-release's environment variables to inject the version directly at build time, without updating package.json.

### Implementation Steps

1. **Update `src/cli/index.ts`** to use build-time injected version:
   ```typescript
   // Version injected at build time, fallback for local development
   const VERSION = process.env.BUILD_VERSION || '1.0.0-dev';
   ```

2. **Update `.releaserc.json`** to pass version during build:
   - Modify the exec plugin's `prepareCmd` to use `--define` flag
   - Change from: `"prepareCmd": "bun run build:cross-platform"`
   - Change to: `"prepareCmd": "bun build src/cli/index.ts --compile --target=bun-linux-x64 --define BUILD_VERSION='\"${nextRelease.version}\"' --outfile dist/cc-track-linux && bun build src/cli/index.ts --compile --target=bun-windows-x64 --define BUILD_VERSION='\"${nextRelease.version}\"' --outfile dist/cc-track-windows.exe"`

### Benefits
- No package.json updates needed
- No commits required during release
- Release binaries show correct version
- Local builds show "1.0.0-dev" to distinguish from releases
- Simple, single-file change approach

### Testing
- Build locally: `bun run build` will show "1.0.0-dev"
- Build with version: `bun build src/cli/index.ts --compile --define BUILD_VERSION='"test"' --outfile dist/test && dist/test --version` will show "test"
- Next GitHub release will automatically embed the correct version