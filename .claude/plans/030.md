# Plan: 030

Captured: 2025-09-12T02:34:14.393Z

## Hook Improvements for Better Developer Experience

### Task: Improve edit-validation and stop-review hooks

**Issue 1: Edit-validation hook and test files**
- Currently: The hook already skips TypeScript checking for test files but may still show confusing output
- Goal: Ensure clean, silent skipping of test files with no error output

**Issue 2: Stop-review hook and private journal files**  
- Currently: Private journal files are tracked in git (good for backup!) but included in review diffs
- Goal: Keep files in git but exclude them from stop-review processing to avoid false "deviation" detections

### Implementation Plan:

1. **Update stop-review hook filtering (src/hooks/stop-review.ts)**
   - Modify `getFilteredGitDiff()` method to filter out:
     - Files matching `.private-journal/**` 
     - Files ending in `.embedding`
   - Add these patterns to the existing filter logic (around line 280-286) that already filters .md files
   - This keeps the files in git but excludes them from review

2. **Verify edit-validation hook behavior**
   - The hook already correctly skips TypeScript checking for test files (lines 115-119)
   - Confirm that when test files are skipped, no output is generated
   - The current implementation should already be silent, but we'll verify

3. **Update tests**
   - Add test cases to stop-review.test.ts:
     - Test that private journal files are filtered from diffs
     - Test that .embedding files are filtered from diffs
   - Verify edit-validation.test.ts confirms silent skipping

4. **Documentation**
   - Update learned_mistakes.md with any insights
   - Note in system_patterns.md that private journal is tracked but excluded from reviews

### Benefits:
- Private journal files remain in git for backup/versioning
- Stop-review hook won't flag journal changes as "deviations" 
- Test files won't generate confusing TypeScript errors
- Cleaner, more focused code review process