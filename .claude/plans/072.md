# Plan: 072

Captured: 2025-09-17T18:35:59.374Z

## Bug Fix: Missing settings.json Creation During Setup

You're absolutely right, Craig - there's a bug in the setup process. The settings.json file (which configures the hooks for Claude Code) is never being created. 

### The Issue
1. The setup flow creates `setup-cc-track.md` which instructs Claude to run `setup-templates` and `setup-commands`
2. Neither of these commands creates settings.json
3. The setup instructions have Claude configure `track.config.json` extensively but never mention creating `settings.json`
4. Without settings.json, no hooks will actually run in Claude Code even if track.config.json enables them

### The Fix
I need to add explicit instructions in the `setup-cc-track.md` command for Claude to create settings.json based on what features the user enables in track.config.json. This involves:

1. **Update src/commands/init.ts**: Add a new Step 5 in the setup command template that instructs Claude to create settings.json based on enabled features
2. **Create the settings.json dynamically** based on which features are enabled:
   - If capture_plan enabled → add ExitPlanMode hook
   - If stop_review enabled → add Stop hook  
   - If edit_validation enabled → add PostToolUse hook for Edit/MultiEdit
   - If pre_tool_validation enabled → add PreToolUse hook for Edit/MultiEdit
   - If pre_compact enabled → add PreCompact hook
   - If statusline enabled → add statusLine configuration
   - If code_review enabled → add validation-passed hook

3. **Include the proper command paths** using `cc-track hook` as the command

This way Claude will create a properly configured settings.json during the setup process based on which features the user chooses to enable.